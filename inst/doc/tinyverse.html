<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>tinyverse</title>

<script src="tinyverse_files/header-attrs-2.14/header-attrs.js"></script>
<script src="tinyverse_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="tinyverse_files/bootstrap-3.3.5/css/spacelab.min.css" rel="stylesheet" />
<script src="tinyverse_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="tinyverse_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="tinyverse_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="tinyverse_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="tinyverse_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="tinyverse_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="tinyverse_files/navigation-1.1/tabsets.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div id="header">



<h1 class="title toc-ignore">tinyverse</h1>

</div>


<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>The R community <a
href="https://tinyverse.netlify.app/"><code>tinyverse</code></a>
movement is a tryout of creating a new package development standards.
The clue is the TINY part here. The last years od R package development
were full of high number of dependencies temptations.
<code>tinyverse</code> means as least dependencies as possible as R
package dependencies matter. Every dependency you add to your project is
an invitation to break your project.</p>
<p>More information is available on <a
href="https://www.tinyverse.org/"><code>tinyverse</code>
website</a>.</p>
</div>
<div id="tinyverse-badges" class="section level2">
<h2><code>tinyverse</code> badges</h2>
<p>The <code>tidyverse</code> team want to help and motivate R
developers. Thus they created a rest-api which generates a dependencies
badge for each CRAN package. The badge contains 2 numbers the first
number is a direct dependencies and the second one recursive ones. The R
base packages are not counted. The <code>tinyverse</code> badge could
have 4 colors bright green or green or orange or red, to get a green
badge package have to have less than 5 packages (&lt;5) in the
<code>Depends</code>/<code>Imports</code>/<code>LinkingTo</code> fields
(check Dependencies subsection for more description). To have a bright
green a zero dependencies are needed. The orange badge is from 5 to 9
dependencies (&gt;=5 and &lt;=9). And the last oen red when there are
more than 9 dependencies (&gt;= 10). Of course the base packages are not
counted as a dependency, <code>pacs::pacs_base()</code>.</p>
<p>Summing up, each badge constraint:</p>
<ul>
<li>bright green: 0</li>
<li>green: &lt;5</li>
<li>orange (&gt;=5 and &lt;=9)</li>
<li>red (&gt;= 10)</li>
</ul>
<p><code>https://tinyverse.netlify.app/</code></p>
<p><code>https://tinyverse.netlify.com/badge/&lt;package&gt;</code></p>
<p>Examples:</p>
<p>dplyr:<br />
<a href="https://CRAN.R-project.org/package=dplyr"><img
src="https://tinyverse.netlify.com/badge/dplyr" /></a></p>
<p>miceFast:<br />
<a href="https://CRAN.R-project.org/package=miceFast"><img
src="https://tinyverse.netlify.com/badge/miceFast" /></a></p>
<ul>
<li>badges are reevaluated daily.</li>
</ul>
</div>
<div id="tidyverse-vs-tidyverse" class="section level2">
<h2>tidyverse vs tidyverse</h2>
<p>The <code>tidyverse</code> is an opinionated collection of R packages
designed for data science. All packages share an underlying design
philosophy, grammar, and data structures. On the other hand the
<code>tinyvere</code> is only a R community movement which try to make a
new programming standard. There is no <code>tinyverse</code> packages
collection, any package which have less than 5 direct dependencies (in
the <code>Depends</code>/<code>Imports</code>/<code>LinkingTo</code>
fields) are treated as a decent one. The best is to have zero
dependencies. Even <code>tidyverse</code> looks to go in the direction
of <code>tinyverse</code> if we check their lower level packages like
<code>purrr</code>, <code>forcats</code>, <code>renv</code> or
<code>rlang</code>.</p>
<p>the core <code>tidyverse</code> packages:</p>
<p><code>ggplot2</code>: <a
href="https://CRAN.R-project.org/package=ggplot2"><img
src="https://tinyverse.netlify.com/badge/ggplot2" /></a><br />
<code>tibble</code>: <a
href="https://CRAN.R-project.org/package=tibble"><img
src="https://tinyverse.netlify.com/badge/tibble" /></a><br />
<code>tidyr</code>: <a
href="https://CRAN.R-project.org/package=tidyr"><img
src="https://tinyverse.netlify.com/badge/tidyr" /></a><br />
<code>readr</code>: <a
href="https://CRAN.R-project.org/package=readr"><img
src="https://tinyverse.netlify.com/badge/readr" /></a><br />
<code>purrr</code>: <a
href="https://CRAN.R-project.org/package=purrr"><img
src="https://tinyverse.netlify.com/badge/purrr" /></a><br />
<code>dplyr</code>: <a
href="https://CRAN.R-project.org/package=dplyr"><img
src="https://tinyverse.netlify.com/badge/dplyr" /></a><br />
<code>stringr</code>: <a
href="https://CRAN.R-project.org/package=stringr"><img
src="https://tinyverse.netlify.com/badge/stringr" /></a><br />
<code>forcats</code>: <a
href="https://CRAN.R-project.org/package=forcats"><img
src="https://tinyverse.netlify.com/badge/forcats" /></a></p>
<p>examples of random <code>tinyverse</code> packages, bright green or
green badges:</p>
<p><code>Rcpp</code>: <a
href="https://CRAN.R-project.org/package=Rcpp"><img
src="https://tinyverse.netlify.com/badge/Rcpp" /></a><br />
<code>rlang</code>: <a
href="https://CRAN.R-project.org/package=rlang"><img
src="https://tinyverse.netlify.com/badge/rlang" /></a><br />
<code>renv</code>: <a
href="https://CRAN.R-project.org/package=renv"><img
src="https://tinyverse.netlify.com/badge/renv" /></a><br />
<code>cat2cat</code>: <a
href="https://CRAN.R-project.org/package=cat2cat"><img
src="https://tinyverse.netlify.com/badge/cat2cat" /></a><br />
<code>runner</code>: <a
href="https://CRAN.R-project.org/package=runner"><img
src="https://tinyverse.netlify.com/badge/runner" /></a></p>
</div>
<div id="r-package-dependencies" class="section level2">
<h2>R package Dependencies</h2>
<p>TL;DR</p>
<ul>
<li>END USER perspective: <code>install.packages</code> requires
<strong>Depends</strong>/<strong>Imports</strong>/<strong>LinkingTo</strong>
DESCRIPTION fields dependencies, recursively.
<code>pacs::pac_deps_user</code> could be used to get them.</li>
<li>DEVELOPER perspective: <code>R CMD check</code> requires
<strong>Depends</strong>/<strong>Imports</strong>/<strong>LinkingTo</strong>/<strong>Suggests</strong>
DESCRIPTION fields dependencies, and for them
<strong>Depends</strong>/<strong>Imports</strong>/<strong>LinkingTo</strong>
fields recursively. <code>pacs::pac_deps_dev</code> could be used to get
them.</li>
</ul>
<p>Now you might think of what preciously these R package dependencies
mean. The R DESCRIPTION file is the place where we could explore the
number and nature of dependencies, the 5 fields are representing
different types of dependencies:
<strong>Depends</strong>/<strong>Imports</strong>/<strong>LinkingTo</strong>/<strong>Suggests</strong>/<strong>Enhances</strong>.</p>
<p>DESCRIPTION file dependencies:</p>
<pre><code>Package: NAME
...
Depends: 
  R (&gt;= 3.6)
Imports:
  dplyr
  data.table
LinkingTo:
  Rcpp
Suggests:
  testthat
  ca2cat
Enhances:
  Hmisc
...</code></pre>
<p>We could get any installed packages description file with the
<code>packageDescription</code> function. More than that the
<code>pacs::pac_description</code> could get any even not installed
package description file and for any version you want.</p>
<p><code>packageDescription("pacs")</code></p>
<p>When we run <code>install.packages</code> (and other install
functions like <code>remotes::install_github</code>) only 3 fields are
installed
<strong>Depends</strong>/<strong>Imports</strong>/<strong>LinkingTo</strong>.
We could easily confirm that by checking its help page and the
<code>dependencies</code> argument definition:</p>
<pre><code>?install.packages
...
dependencies: 
 ...
 The default, ‘NA’, 
 means ‘c(&quot;Depends&quot;, &quot;Imports&quot;, &quot;LinkingTo&quot;)’.</code></pre>
<p><strong>Depends</strong> are packages <code>library</code>
(attached), before the main package is <code>library</code> (attached).
So when we <code>library()</code> the main package
<strong>Depends</strong> dependencies functions are available to the end
user in the R console. This could be more convenient for the end user if
the main package is for example offering additional functionality over
the dependency one.</p>
<p>The <strong>Imports</strong> field lists packages whose namespaces
are imported from (as specified in the NAMESPACE file or when sb is
using <code>::</code>/<code>:::</code> inside the package) but which do
not need to be attached (<code>library</code>). So when we
<code>library()</code> the main package such dependencies functions are
not available to the user in the R console. Namespaces accessed by the
<code>::</code> and <code>:::</code> operators
(e.g. <code>ggplot2::ggplot</code>) must be listed in the
<strong>Imports</strong> field, or in <strong>Suggests</strong> (when
used only for tests or examples).</p>
<p>A package that wishes to make use of header files in other packages
to compile its C/C++ code needs to declare them as a comma-separated
list in the field <strong>LinkingTo</strong>. Specifying a package in
<strong>LinkingTo</strong> suffices if these are C/C++ headers
containing source code or static linking is done at installation: the
packages do not need to be (and usually should not be) listed in the
<strong>Depends</strong> or <strong>Imports</strong> fields.</p>
<p>So what about the rest. <strong>Suggests</strong> are installed when
we run <code>R CMD CHECK</code> (or higher level like
<code>devtools::check()</code>), they are used for tests (e.g. testthat)
or for examples (<code>roxygen2</code> <span
class="citation">@examples</span>). <strong>Enhances</strong> is used
rarely as these are packages which could extent the usage and are NOT
needed for running examples and tests. If your tests/examples use e.g. a
dataset from another package it should be in <strong>Suggests</strong>
and not <strong>Enhances</strong>.</p>
<p>So now we see that a <strong>Imports</strong> dependency is not equal
to a <strong>Suggests</strong> dependency. From the perspective of the
end user we focus on
<strong>Depends</strong>/<strong>Imports</strong>/<strong>LinkingTo</strong>
dependencies which they will downlaod with
<code>install.packages</code>.</p>
<p>It’s common for packages to be listed in Imports in DESCRIPTION, but
not in NAMESPACE. The DESCRIPTION file Imports field really has nothing
to do with functions imported into the namespace. The DESCRIPTION file
Imports is mainly used by <code>install.packages</code>. On the other
hand NAMESPACE is a place where we defining what we need to build our
package and what we want to expose to the end users (export). Nowadays
the NAMESPACE file is even more mistearious as it is build automatically
e.g. by <code>roxygen2</code> package. A package have to be listed in
the <strong>Imports</strong> in DESCRIPTION file, but not in NAMESPACE
if we will call the dependencies function with <code>::</code> in the
main package. This explicit calls to dependencies are preferred.</p>
<p>If you are interested “How-R-Searches-And-Finds-Stuff” I recommend <a
href="http://blog.obeautifulcode.com/R/How-R-Searches-And-Finds-Stuff/">a
great blog post</a> which have more than 10 years and still is a one of
the most valuable R sources.</p>
</div>
<div id="tinytest-vs-testthat" class="section level2">
<h2><code>tinytest</code> vs <code>testthat</code></h2>
<p>This subsection will be a subjective view on the difference between
<code>tinytest</code> and <code>testthat</code> packages. This is a
great example in my opinion as showing that package could have many
dependencies nevertheless not exposed to the end user (these
dependencies are not installed with <code>install.packages</code>), as
is in <code>Suggests</code> field of the DESCRIPTION file.
<code>tinytest</code> was created to offer similar functionality to
<code>testthat</code> package nevertheless <code>tinytest</code> has
zero dependencies. For me <code>tinytest</code> is an interesting
alternative compared to <code>testthat</code> nevertheless not so
obvious replacement. I do not care how many dependencies has the
<code>testthat</code> package as it is located in <code>Suggests</code>
field of DESCRIPTION file. <code>testthat</code> will not be delayed
loaded with <code>requireNampese</code> too. This mean that the higher
number of dependencies from the <code>testthat</code> package is only my
problem (developer one, not the end user) when e.g. I am checking the
package (e.g. with <code>R CMD check</code>). To be fair how many
additional packages have to be downloaded by <strong>a
developer</strong> (e.g. for <code>R CMD check</code>) when comparing
<code>tinytest</code> and <code>testthat</code>. When we want to check
these packages directly, I will be adding some code to these packages.
In the case of <code>tinytest</code> it is zero packages and for
<code>testthat</code> 80 packages now. Please use
<code>pacs::pac_deps_dev("tinytest")</code> and
<code>pacs::pac_deps_dev("testthat")</code> calls to confirm that. When
<code>tinytest</code> and <code>testthat</code>are in the Suggests field
of another package (e.g. <code>pacs</code>) which we will be
<code>R CMD check</code>, then developer need additional 0 packages for
<code>tinytest</code> and 30 packages for <code>testthat</code>
(<code>pacs::pac_deps_user("testthat")</code>). Remember that these
dependencies might overlap with other packages and their
dependencies.</p>
<p>Dependencies from the end user perspective:</p>
<p><code>tinytest</code>:<br />
<a href="https://CRAN.R-project.org/package=tinytest"><img
src="https://tinyverse.netlify.com/badge/tinytest" /></a></p>
<p><code>testthat</code>:<br />
<a href="https://CRAN.R-project.org/package=testthat"><img
src="https://tinyverse.netlify.com/badge/testthat" /></a></p>
</div>
<div id="how-to-reduce-the-number-of-dependencies"
class="section level2">
<h2>How to reduce the number of dependencies</h2>
<p>One of the method of reducing number of dependencies (exposed to end
users) is to transfer the package from Imports to Suggests and load it
in the delayed manner, or not include it at all. So we have to identify
package functions which will be used optionally or rarely (are not a
core of the package). Then we have to apply conditional execution of it
if the package is installed (available), if not then ask user to install
it. If a function with such delayed loaded package is used in examples
or tests then the package have to be in <strong>Suggests</strong>
field.</p>
<pre><code>func &lt;- function() {
  if (requireNamespace(&quot;PACKAGE&quot;, quietly = TRUE)) {
    # regular code 
  } else {
    stop(&quot;Please install the PACKAGE to use the func function&quot;)
  }
}</code></pre>
<p><code>parsnip</code>:<br />
<a href="https://CRAN.R-project.org/package=parsnip"><img
src="https://tinyverse.netlify.com/badge/parsnip" /></a></p>
<p><code>caret</code>:<br />
<a href="https://CRAN.R-project.org/package=testthat"><img
src="https://tinyverse.netlify.com/badge/testthat" /></a></p>
<p><code>parsnip</code> and <code>caret</code> packages are examples
which apply this strategy. It could be easily confirmed by looking for
<code>requireNamespace</code> phrase with github search, from each of
the repo.</p>
<p><a href="https://github.com/topepo/caret">caret github</a></p>
<p><a href="https://github.com/tidymodels/parsnip">parsnip
github</a></p>
</div>
<div id="pacs-package" class="section level2">
<h2><code>pacs</code> package</h2>
<p>One of the functionality of the <code>pacs</code> package is to check
a package complexity. We could check the number of dependencies
(recursively or not) and even check how many MB are allocated for a
package and all its dependencies.</p>
<p><strong>Weight Case Study: <code>devtools</code></strong></p>
<p>Take into account that packages sizes are appropriate for your local
system (<code>Sys.info()</code>). Installation with
<code>install.packages</code> and some <code>devtools</code> functions
might result in different packages sizes.</p>
<p>If you do not want to install anything in your current library
(<code>.libPaths()</code>) and still inspect a package size, then a
usage of the <code>withr</code> package is recommended.
<code>withr::with_temp_libpaths</code> is recommended to isolate the
download process.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># restart of R session could be needed</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>withr<span class="sc">::</span><span class="fu">with_temp_libpaths</span>({<span class="fu">install.packages</span>(<span class="st">&quot;devtools&quot;</span>); <span class="fu">cat</span>(pacs<span class="sc">::</span><span class="fu">pac_true_size</span>(<span class="st">&quot;devtools&quot;</span>) <span class="sc">/</span> <span class="dv">10</span><span class="sc">**</span><span class="dv">6</span>, <span class="st">&quot;MB&quot;</span>, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)})</span></code></pre></div>
<p>Installation in your main library.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># if not have</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</span></code></pre></div>
<p>Size of the <code>devtools</code> package:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(pacs<span class="sc">::</span><span class="fu">pac_size</span>(<span class="st">&quot;devtools&quot;</span>) <span class="sc">/</span> <span class="dv">10</span><span class="sc">**</span><span class="dv">6</span>, <span class="st">&quot;MB&quot;</span>, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<p>True size of the package as taking into account its dependencies. At
the time of writing it, it is <code>113MB</code> for
<code>devtools</code> without base packages
(<code>Mac OS arm64</code>).</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(pacs<span class="sc">::</span><span class="fu">pac_true_size</span>(<span class="st">&quot;devtools&quot;</span>) <span class="sc">/</span> <span class="dv">10</span><span class="sc">**</span><span class="dv">6</span>, <span class="st">&quot;MB&quot;</span>, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<p>A reasonable assumption might be to count only dependencies which are
not used by any other package. Then we could use
<code>exclude_joint</code> argument to limit them. However hard to
assume if your local installation is a reasonable proxy for an average
user.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># exclude packages if at least one other package use it too</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(pacs<span class="sc">::</span><span class="fu">pac_true_size</span>(<span class="st">&quot;devtools&quot;</span>, <span class="at">exclude_joint =</span> 1L) <span class="sc">/</span> <span class="dv">10</span><span class="sc">**</span><span class="dv">6</span>, <span class="st">&quot;MB&quot;</span>, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<p>It is crucial to check the number of dependencies too:</p>
<p><a href="https://CRAN.R-project.org/package=devtools"><img
src="https://tinyverse.netlify.com/badge/devtools" /></a></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 70 recursive dependencies</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>pacs<span class="sc">::</span><span class="fu">pac_deps</span>(<span class="st">&quot;devtools&quot;</span>, <span class="at">local =</span> <span class="cn">TRUE</span>)<span class="sc">$</span>Package</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 20 direct dependencies</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>pacs<span class="sc">::</span><span class="fu">pac_deps</span>(<span class="st">&quot;devtools&quot;</span>, <span class="at">local =</span> <span class="cn">TRUE</span>, <span class="at">recursive =</span> <span class="cn">FALSE</span>)<span class="sc">$</span>Package</span></code></pre></div>
</div>
<div id="references" class="section level2">
<h2>References</h2>
<p>Please read in the order all of the 3 sources to become a R packages
developer guru :=)</p>
<ul>
<li><a href="https://r-pkgs.org/"
class="uri">https://r-pkgs.org/</a></li>
<li><a
href="http://blog.obeautifulcode.com/R/How-R-Searches-And-Finds-Stuff/"
class="uri">http://blog.obeautifulcode.com/R/How-R-Searches-And-Finds-Stuff/</a></li>
<li><a
href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html"
class="uri">https://cran.r-project.org/doc/manuals/r-release/R-exts.html</a></li>
</ul>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
